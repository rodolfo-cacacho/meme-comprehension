<!-- templates/register.html -->
{% extends "base.html" %}

{% block title %}Register - MemeQA{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="text-center mb-5">
            <h1>ğŸ“ Join the Research</h1>
            <p class="lead">Register to track your contributions and get updates on research findings</p>
        </div>
        
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">ğŸ‘¤ Researcher Registration</h4>
            </div>
            <div class="card-body">
                <form method="post" id="registrationForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name" required 
                                   placeholder="Your full name">
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="email" name="email" required 
                                   placeholder="your@email.com">
                            <div class="form-text">We'll send you a login link instead of using passwords</div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="country" class="form-label">Country <span class="text-danger">*</span></label>
                            <select class="form-select" id="country" name="country" required>
                                <option value="">Select your country...</option>
                                <option value="Germany">Germany</option>
                                <option value="United States">United States</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="France">France</option>
                                <option value="Spain">Spain</option>
                                <option value="Italy">Italy</option>
                                <option value="Canada">Canada</option>
                                <option value="Australia">Australia</option>
                                <option value="Japan">Japan</option>
                                <option value="South Korea">South Korea</option>
                                <option value="China">China</option>
                                <option value="India">India</option>
                                <option value="Brazil">Brazil</option>
                                <option value="Mexico">Mexico</option>
                                <option value="Russia">Russia</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="affiliation" class="form-label">Affiliation <span class="text-muted">(optional)</span></label>
                            <input type="text" class="form-control" id="affiliation" name="affiliation" 
                                   placeholder="University, Company, etc.">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="research_interest" class="form-label">Research Interest <span class="text-muted">(optional)</span></label>
                        <select class="form-select" id="research_interest" name="research_interest">
                            <option value="">Select your primary interest...</option>
                            <option value="Vision-Language Models">Vision-Language Models</option>
                            <option value="Cultural AI">Cultural AI</option>
                            <option value="Computational Humor">Computational Humor</option>
                            <option value="Internet Culture">Internet Culture</option>
                            <option value="AI Benchmarking">AI Benchmarking</option>
                            <option value="Multimodal Learning">Multimodal Learning</option>
                            <option value="Social Media Analysis">Social Media Analysis</option>
                            <option value="Human-AI Interaction">Human-AI Interaction</option>
                            <option value="General AI Research">General AI Research</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Notification Preferences</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="notify_updates" name="notify_updates" checked>
                            <label class="form-check-label" for="notify_updates">
                                ğŸ“¬ Send me updates about research findings and publications
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="notify_milestones" name="notify_milestones" checked>
                            <label class="form-check-label" for="notify_milestones">
                                ğŸ¯ Notify me when we reach dataset milestones
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="data_access" name="data_access">
                            <label class="form-check-label" for="data_access">
                                ğŸ“Š I'm interested in accessing the research dataset
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="privacy_agreement" name="privacy_agreement" required>
                            <label class="form-check-label" for="privacy_agreement">
                                <strong>Privacy Agreement:</strong> I understand that my email will only be used for 
                                research updates and will not be shared with third parties. I can unsubscribe at any time. 
                                <span class="text-danger">*</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">
                            ğŸš€ Join the Research
                        </button>
                        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                            Continue as Anonymous
                        </a>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card shadow-sm mt-4">
            <div class="card-body">
                <h5 class="card-title">ğŸ Benefits of Registering</h5>
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li>ğŸ“Š Track your contribution statistics</li>
                            <li>ğŸ“ Get cited in research publications</li>
                            <li>ğŸ“§ Receive research updates and findings</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li>ğŸ† Recognition for major contributions</li>
                            <li>ğŸ“š Early access to research papers</li>
                            <li>ğŸ¤ Connect with other researchers</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Simple Login Option -->
        <div class="card shadow-sm mt-4 bg-light">
            <div class="card-body">
                <h5 class="card-title">ğŸ”‘ Already Registered?</h5>
                <p class="card-text">Enter your email to get a login link sent to you:</p>
                <form method="post" action="{{ url_for('request_login') }}" class="row g-3">
                    <div class="col-auto flex-grow-1">
                        <input type="email" class="form-control" name="login_email" placeholder="your@email.com" required>
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-outline-primary">Send Login Link</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
// Form validation and enhancement
document.getElementById('registrationForm').addEventListener('submit', function(e) {
    const email = document.getElementById('email').value;
    const name = document.getElementById('name').value;
    const country = document.getElementById('country').value;
    
    if (!email || !name || !country) {
        e.preventDefault();
        alert('Please fill in all required fields.');
        return false;
    }
    
    if (!document.getElementById('privacy_agreement').checked) {
        e.preventDefault();
        alert('Please agree to the privacy terms to continue.');
        return false;
    }
    
    // Show success message
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.innerHTML = 'â³ Registering...';
    submitBtn.disabled = true;
});

// Email validation
document.getElementById('email').addEventListener('blur', function() {
    const email = this.value;
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    
    if (email && !emailRegex.test(email)) {
        this.classList.add('is-invalid');
        if (!this.nextElementSibling || !this.nextElementSibling.classList.contains('invalid-feedback')) {
            const feedback = document.createElement('div');
            feedback.className = 'invalid-feedback';
            feedback.textContent = 'Please enter a valid email address.';
            this.parentNode.appendChild(feedback);
        }
    } else {
        this.classList.remove('is-invalid');
        const feedback = this.parentNode.querySelector('.invalid-feedback');
        if (feedback) feedback.remove();
    }
});
</script>
{% endblock %}